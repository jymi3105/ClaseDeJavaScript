<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>eventos_25 - Arrastrar y soltar: Alternar entre ambos cuadros el texto y la imagen (bidireccional)</title>
		<style>
			.c1 {
				border: 5px solid red;
				width: 100px;
				height: 100px;
				position: absolute;
				top: 5cm;
				left: 8cm;
			}

			.c2 {
				border: 5px solid blue;
				width: 100px;
				height: 100px;
				position: absolute;
				top: 5cm;
				left: 12cm;
			}
		</style>
	</head>
	<body>
		<h1>eventos_25 - Arrastrar y soltar: Alternar entre ambos cuadros el texto y la imagen (bidireccional)</h1>
		<hr />

		<div class="c1" id="origen" ondragover="fase2(event);" ondrop="fase3(event);">
			<span draggable="true" id="texto" ondragstart="fase1(event);" ondragend="console.log('Final');">EL TEXTO</span>
			<img draggable="true" src="./recursos/ball.gif" id="pelota" ondragstart="fase1(event);"/> 
		</div>

		<div class="c2" id="destino" ondragover="fase2(event);" ondrop="fase3(event);"></div>

		<script type="text/javascript">

			function fase1(pEvento){
				//Dentro del primer parametrro de setData, puedo poner lo que quiera, pero luego 
				//debe coincidir con el getData, que es donde transfiero los daros que aqui tomo
				pEvento.dataTransfer.setData("a", pEvento.target.id);
				console.log(pEvento.target.tagName);
				console.log(pEvento.currentTarget.tagName);
				console.log(pEvento.target.id);
			}


			function fase2(pEvento){
				//Esto es para evitar lo que hace el navegador por defecto
				pEvento.preventDefault();
			}


			function fase3(pEvento){
				var datos = pEvento.dataTransfer.getData("a");
				//Aunque de este modo, el texto se puede meter dentro de la imagen, si hago drop con el 
				//encima de ella, aun no se como evitarlo
				pEvento.target.appendChild(document.getElementById(datos));
				console.log(pEvento.target.tagName);
				console.log(pEvento.currentTarget.tagName);
				console.log(pEvento.target.id);
			}

		</script>
	</body>
</html>