<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>storage_08_A - Ejercicio: pasar valores de un select a otro en otra página</title>
</head>

<body>
	<h1>storage_08_A - Ejercicio: pasar valores de un select a otro en otra página</h1>
	<hr />

	<select id="seleccion"></select>

	<script type="text/javascript">

		window.addEventListener("storage", function () {

			var value, dato;
			//Cojo el valor que haya en la primero posicion del localstorage
			value = window.localStorage.key(0);
			dato = window.localStorage.getItem(localStorage.key(0));
			console.log(value + " - " + dato);
			//Creo el elemento para el desplegable, y luego lo inserto un testo 
			var opcion = document.createElement("option");
			opcion.setAttribute("value", value);
			opcion.appendChild(document.createTextNode(dato));
			document.getElementById("seleccion").appendChild(opcion);
			//Finalmente lo borro del localStorage, porque sino en las siguientes veces que lo hiciera, siempre me 
			//tomaria el mismo valor
			window.localStorage.removeItem(value);
		});

	</script>
</body>

</html>